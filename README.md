# Hadoop MapReduce Payment Method Counter

This project is a **Hadoop MapReduce** implementation that processes a dataset of transactions and counts occurrences of each **payment method** (e.g., Visa, MasterCard, Cash, etc.).

## 📌 Features
- Uses **Hadoop MapReduce** to process large-scale transaction data.
- Extracts and counts different payment methods.
- Outputs the total number of transactions per payment type.

---

## 🚀 Installation & Setup
### **1. Prerequisites**
Ensure you have the following installed:
- **Hadoop 2.7.2** or compatible version
- **Java 8 (JDK 1.8)**
- **IntelliJ IDEA (optional, for development)**
- **AWS EC2 (optional, for cloud deployment)**

### **2. Clone the Repository**
```sh
git clone https://github.com/your-repo/hadoop-payment-counter.git
cd hadoop-payment-counter
```

### **3. Compile the Java Code**
```sh
mvn clean package
```
This generates a JAR file inside the `target/` folder.

---

## 📂 Project Structure
```
.
├── src
│   ├── main
│   │   ├── java
│   │   │   ├── tn/insat/tp1
│   │   │   │   ├── PaymentMethodMapper.java
│   │   │   │   ├── PaymentMethodReducer.java
│   │   │   │   ├── PaymentCounter.java
├── input
│   ├── purchases.txt  # Sample transaction dataset
├── output  # Generated by Hadoop after execution
├── README.md  # This file
```

---

## 🛠 How It Works
### **1. PaymentMethodMapper (Mapper)**
- Reads each line of input.
- Extracts the **last token** (assumed to be the payment method).
- Emits `(payment_method, 1)` as key-value pair.

### **2. PaymentMethodReducer (Reducer)**
- Receives grouped key-value pairs.
- Aggregates the count for each payment method.
- Outputs `(payment_method, total_count)`.

---

## 📊 Running the Hadoop Job
### **1. Upload Input Data to HDFS**
```sh
hadoop fs -mkdir -p /user/hadoop/input
hadoop fs -put purchases.txt /user/hadoop/input/
```

### **2. Run the MapReduce Job**
```sh
hadoop jar target/hadoop-payment-counter.jar tn.insat.tp1.PaymentCounter /user/hadoop/input /user/hadoop/output
```

### **3. View the Output**
```sh
hadoop fs -cat /user/hadoop/output/part-r-00000
```
Sample Output:
```
MasterCard 150
Visa 120
Cash 90
Discover 45
Amex 60
```

---

## 📦 Deploying to AWS EC2 (Optional)
1. **Launch Ubuntu 22.04 EC2 Instance** (Free Tier eligible).
2. **Install Hadoop & Java 8** using the setup script.
3. **Use SCP to Upload JAR & Input File:**
   ```sh
   scp -i hadoop-key.pem target/hadoop-payment-counter.jar ubuntu@your-ec2-ip:/home/ubuntu/
   scp -i hadoop-key.pem purchases.txt ubuntu@your-ec2-ip:/home/ubuntu/
   ```
4. **Run Hadoop Job on EC2**
   ```sh
   ssh -i hadoop-key.pem ubuntu@your-ec2-ip
   hadoop jar hadoop-payment-counter.jar tn.insat.tp1.PaymentCounter input output
   ```

---

## 📝 Notes
- Ensure `hadoop-env.sh` is correctly set up with Java 8.
- Clear previous output before re-running:
  ```sh
  hadoop fs -rm -r /user/hadoop/output
  ```

---

## 📜 License
This project is **open-source** under the MIT License.

---

## 🤝 Contributing
Feel free to submit PRs for improvements and optimizations!

📧 Contact: [your-email@example.com]

